# 2tick.kz - PRD (Product Requirements Document)

## Описание продукта
Сервис электронного подписания договоров для бизнеса в Казахстане. Позволяет создавать, отправлять и подписывать договоры с верификацией через SMS, звонок или Telegram.

## Реквизиты компании
- **Название:** ИП «AN Venture»
- **БИН/ИИН:** 040825501172
- **Адрес:** г. Алматы, микрорайон Таугуль, дом 13, кв/офис 64
- **Email:** admin@2tick.kz
- **Телефон:** +7 707 400 3201
- **Директор:** Нұрғожа Әділет Нұралнұлы

## Тарифные планы
| План | Цена | Лимит договоров |
|------|------|-----------------|
| FREE | 0 ₸ | 3 договора |
| START | 5 990 ₸/мес | 20 договоров |
| BUSINESS | 14 990 ₸/мес | 50 договоров |

## Текущий статус
- **Домен:** 2tick.kz (SSL настроен)
- **Деплой:** Docker + Nginx на VPS (hoster.kz)
- **Платёжный шлюз:** FreedomPay Lite (интегрирован)

---

## Что реализовано

### 21.01.2025 (текущая сессия)
- ✅ **КРИТИЧЕСКИЙ БАГ ИСПРАВЛЕН: Данные Стороны А попадали в поля Стороны Б**
  - Проблема: При создании контракта Стороной А (арендодатель), их данные (телефон, email) неправильно появлялись в полях Стороны Б (подписант)
  - Решение: 
    - Frontend: Создаётся `cleanedPlaceholderValues` содержащий ТОЛЬКО поля с `owner='landlord'`
    - Frontend: `processContentWithPlaceholders` пропускает плейсхолдеры `signer/tenant`
    - Backend: Извлекает signer info ТОЛЬКО из полей с `owner='signer'` или `owner='tenant'`
  - Тестирование: 8/8 тестов пройдено (test_signer_placeholder_fix_iteration4.py)
  - Файлы изменены:
    - `/app/frontend/src/pages/CreateContractPage.js` (строки 653-710)
    - `/app/backend/server.py` (строки 2868-2920)

### 19.12.2025 (предыдущая сессия)
- ✅ **Полная интернационализация правовых страниц (RU/KK/EN):**
  - `/offer` — Публичная оферта (все секции переведены)
  - `/privacy` — Политика конфиденциальности (все секции переведены)
  - `/refund` — Правила возврата (все секции переведены)
  - `/contacts` — Контакты (адрес переведён)
- ✅ **FAQ секция на лендинге:**
  - 6 вопросов с ответами
  - Полные переводы на RU/KK/EN
- ✅ **Переводы тарифов на лендинге:**
  - Описания планов (FREE, START, BUSINESS)
  - Фичи каждого плана
  - Футер с юридическими ссылками
- ✅ **Исправлен импорт ChevronDown** в NewLandingPage.js

### 14.01.2025
- ✅ Юридические страницы для эквайринга:
  - `/offer` — Публичная оферта
  - `/privacy` — Политика конфиденциальности
  - `/refund` — Правила возврата
  - `/contacts` — Контакты
- ✅ Обновлён футер с юридическими ссылками
- ✅ Секция тарифов с 3 планами и ценами в тенге
- ✅ Описание процедуры оплаты добавлено в оферту
- ✅ Логотипы Visa/Mastercard

### Ранее реализовано
- ✅ FreedomPay интеграция (код готов, активирован провайдером)
- ✅ История покупок в профиле
- ✅ Лимит договоров для новых пользователей = 3
- ✅ Telegram бот с кнопкой «Копировать код» (v21.8)
- ✅ i18n для OTP сообщений (RU/KK/EN)
- ✅ Переключатель языка на странице договора
- ✅ Страница тарифов в профиле с автопродлением
- ✅ Лимиты договоров и редирект на тарифы
- ✅ Статистика «Осталось договоров» на дашборде
- ✅ Docker-контейнеризация и деплой на VPS
- ✅ SEO оптимизация лендинга
- ✅ Новый favicon

---

## Приоритетный бэклог

### P0 (Критично)
- [x] Интеграция FreedomPay Lite ✅
- [x] i18n для правовых страниц ✅
- [x] FAQ секция ✅

### P1 (Важно)
- [ ] Водяной знак на PDF

### P2 (Желательно)
- [ ] Конструктор договоров
- [ ] Детальный аудит действий
- [ ] История версий договоров

### Не делаем (по просьбе пользователя)
- AdminTemplatesPage i18n (не нужен перевод админки)

---

## Технический стек
- **Frontend:** React, Tailwind CSS, react-i18next, lucide-react
- **Backend:** FastAPI, Motor (async MongoDB)
- **Bot:** python-telegram-bot v21.8
- **Деплой:** Docker, Docker Compose, Nginx, Let's Encrypt

## Ключевые файлы
- `/app/frontend/src/i18n.js` — все переводы (RU/KK/EN)
- `/app/frontend/src/pages/NewLandingPage.js` — лендинг с тарифами и FAQ
- `/app/frontend/src/pages/ProfilePage.js` — профиль с тарифами
- `/app/frontend/src/pages/{OfferPage,PrivacyPage,RefundPage,ContactsPage}.js` — юридические страницы
- `/app/backend/server.py` — API
- `/app/docker-compose.yml` — конфигурация деплоя
